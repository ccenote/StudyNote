# Mysql

### 1. 数据库三大范式

数据库三大范式是指在关系数据库设计中，通过不断的分解关系，将数据的冗余和不一致性降到最低的三个规范化级别：

1. 第一范式（1NF）：要求每个属性都具有原子性，即属性不可再分解。
2. 第二范式（2NF）：在满足1NF的基础上，要求每个非主属性都完全依赖于主键，而不是依赖与主键的一部分。
3. 第三范式（3NF）：在满足2NF的基础上，要求每个非主属性都不依赖于其他非主属性，即不存在传递依赖关系。

应用三大范式可以避免数据冗余和不一致性，保证数据的完整性和稳定性。但是，在某些情况下，为了提高查询性能和减少数据的连接操作，可能需要在设计中违反范式规则。此时需要根据具体情况，进行权衡和取舍。

### 2. 数据库ACID特性

1. 原子性：事务是最小的执行单位，不允许分割。事务的原子性确保动作要么全部完成，要么完全不起作用。
2. 一致性：执行事务前后，数据保持一致，例如转账业务中，无论事务是否成功，转账者和收款人的总额应该是不变的。
3. 隔离性：并发访问数据时，一个用户的事务不被其他事务所干扰，各并发事务之间数据库是独立的。
4. 持久性：一个事务被提交之后，它对数据库中数据的改变是持久的，即使数据库发生故障也不应该对其有任何影响。

### 3. 并发事务带来的问题

1. 数据一致性：由于多个事务同时访问同一个数据集合，可能会导致数据的不一致性。例如，一个事务读取了某个数据，另一个事务同时修改了这个数据，那么第一个事务在提交时就会出现数据不一致性。
2. 丢失修改：如果多个事务同时修改同一个数据，那么可能会出现其中一个事务的修改被另一个事务覆盖的情况，从而导致数据的丢失。
3. 死锁：如果多个事务同时需要访问相同的一组数据，但是它们的访问顺序不同，就可能会出现死锁的情况。例如，事务A锁定了数据1，然后请求锁定数据2，而事务B则锁定了数据2，然后请求锁定数据1，这样就会造成死锁。
4. 性能问题：由于每个事务必须等待其他事务完成之后才能访问数据，所以并发事务可能会导致数据库系统的性能下降。

为了解决并发事务带来的问题，可以使用事务隔离级别等，来保证数据的一致性，可靠性和并发性能。

### 4. 数据库事务隔离级别

数据库事务隔离级别是指在并发事务中，一个事务的修改结果何时对其他事务可见的级别。常见的数据库事务隔离级别包括：

1. 读未提交：一个事务可以读取另一个事务还未提交的数据，可能会出现脏读、不可重复读和幻读的问题。
2. 读已提交：一个事务只能读取另一个已经提交的事务的数据，可以避免脏读的问题，但是可能会出现不可重复读和幻读的问题。
3. 可重复读：一个事务在执行期间多次读取同一个数据集合时，能够保证读取到相同的数据，可以避免脏读和不可重复的问题，但是可能会出现幻读的问题。
4. 串行化：最高的隔离级别，事务之间完全串行执行，可以避免脏读、不可重复读和幻读的问题，但是会降低并发性能。

不同的隔离级别之间，对事务的并发性能和数据的一致性有不同的影响。因此，在实际应用中，需要根据具体情况选择合适的隔离级别，以兼顾并发性能和数据的一致性。

### 5. mysql引擎对比

1. InnoDB引擎

   InnoDB是Mysql5.6版本的默认存储引擎，它支持事务、行级锁和外键约束等功能，适用于高并发，高可靠性的应用场景。相较于MyISAM引擎，InnoDB支持更好的事务处理能力和更高的数据完整性保证，但是在并发读写性能方面略逊于MyISAM。

2. MyISAM引擎

   MyISAM是MySQL的另一种常用存储引擎，它不支持事务和行级锁，但是在并发读写性能方面表现出色，适用于读频繁，写少的应用场景。由于不支持事务，因此在数据完整性保证方面要比InnoDB差。

3. Memory引擎

   Memory存储引擎将数据存储在内存中，因此具有快速的读写速度，适用于对性能要求较高的应用场景，比如缓存，会话管理等。由于数据存储在内存中，因此不支持大数据量，长时间存储，也不支持事务和外键约束等功能。

4. NDB Cluster引擎

   NDB Cluster是Mysql的一种分布式存储引擎，他将数据分散存储在多台服务器上，具有高可用性、高并发、高可扩展性等特点，适用于需要大规模数据存储和高可用性的应用场景。但是在性能方面可能不如InnoDB或MyISAM。

   



